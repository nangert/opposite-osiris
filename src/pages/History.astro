---
import Layout from "@layouts/Layout.astro";

interface PlayerData {
  username: string;
  rating: number;
  place: number;
}

//https://api.duelyst2.com/api/users/-NJW2O3_yDSovtVv-kgH/games/-NSfGWfbVaPe-G7vHEZn/replay_data
//https://api.duelyst2.com/api/me/games/share_replay
const user = "-NJW19A1jvOyXiVn-Wy7";
const url = `https://api.duelyst2.com/api/users/${user}/games?len=50&blatmmr=true`;
const token =
  "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJkIjp7ImlkIjoiLU5KVzE5QTFqdk95WGlWbi1XeTciLCJlbWFpbCI6ImFuZ2VydC5uaWtsYXNAZ21haWwuY29tIiwidXNlcm5hbWUiOiJuYW5nZXJ0In0sInYiOjAsImlhdCI6MTY4MTEyODg1MCwiZXhwIjoxNjgyMzM4NDUwfQ.8BcQiBW6cC23V7Elgjd7riDG2-6T--lOg0ymU3SV0-E";

fetch(url, {
  method: "GET",
  headers: {
    "Content-Type": "application/json",
    Authorization: `Bearer ${token}`,
  },
})
  .then(response => {
    if (!response.ok) {
      throw new Error("Network response was not ok");
    }
    return response.json();
  })
  .then(data => {
    console.log(data[0]);
  })
  .catch(error => {
    console.error("There was a problem with the fetch operation:", error);
  });
---
